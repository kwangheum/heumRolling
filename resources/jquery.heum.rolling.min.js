/**
 * version : 1.0
 * developer : kwangheum
 * email : myrkh1213@gmail.com
 * blog : http://kwangheum.blogspot.kr
 * github : http://github.com/kwangheum
*/
(function(e,t,n,r){function f(t,n){this.element=t;this.options=e.extend({},a,n);this._defaults=a;this._name=u;this.init()}function l(t,n){var r=e(".heum-item-group").index(t.find(".heum-item-group"));o[r]=n}function c(e,t){e.stopPropagation();e.preventDefault();if(e.type==="touchend"){t.off("click")}}function h(t,n,r,s,o){var u=e(".heum-item-group").index(t.find(".heum-item-group"));if(n){clearTimeout(i[u]);i[u]=setTimeout(function(){p(t,n,r,s,o)},r*1e3)}else{clearTimeout(i[u]);return false}return false}function p(e,t,n,r,i){v(e,r,i);h(e,t,n,r,i)}function d(t,n){if(n){t.find("*").filter(function(){e(this).addClass("disabled")})}else{t.find("*").filter(function(){e(this).removeClass("disabled")})}t.find("*").filter(function(){e(this).prop("disabled",n)})}function v(e,t,n){d(e,true);if(t=="prev"){var r=e.find(".heum-item-group .item:last");if(n=="vertical"){e.find(".heum-item-group").css({"margin-top":"-"+Math.abs(r.outerHeight(true))+"px"});r.prependTo(e.find(".heum-item-group"));e.find(".heum-item-group").animate({"margin-top":"0px"},"slow",function(){d(e,false)})}else{e.find(".heum-item-group").css({"margin-left":"-"+Math.abs(r.outerWidth(true))+"px"});r.prependTo(e.find(".heum-item-group"));e.find(".heum-item-group").animate({"margin-left":"0px"},"slow",function(){d(e,false)})}}else{var r=e.find(".heum-item-group .item:first");if(n=="vertical"){var i=parseInt(r.css("margin-top").replace("px"));var s=0;if(i>0){s=Math.abs(r.outerHeight(true))-Math.abs(i)}else{s=Math.abs(r.outerHeight(true))+Math.abs(i)}e.find(".heum-item-group").animate({"margin-top":"-"+s+"px"},"slow",function(){e.find(".heum-item-group").css({"margin-top":"0px"});r.appendTo(e.find(".heum-item-group"));d(e,false)})}else{e.find(".heum-item-group").animate({"margin-left":"-"+Math.abs(r.outerWidth(true))+"px"},"slow",function(){e.find(".heum-item-group").css({"margin-left":"0px"});r.appendTo(e.find(".heum-item-group"));d(e,false)})}}}function m(t){var n=e(".heum-item-group").index(t.find(".heum-item-group"));t.find(".heum-item-group").clearQueue().finish();h(t,false,o[n].timer,o[n].rolling,o[n].scroll);v(t,"next",o[n].scroll);if(s[n]){h(t,true,o[n].timer,o[n].rolling,o[n].scroll)}}function g(t){var n=e(".heum-item-group").index(t.find(".heum-item-group"));t.find(".heum-item-group").clearQueue().finish();h(t,false,o[n].timer,o[n].rolling,o[n].scroll);v(t,"prev",o[n].scroll);if(s[n]){h(t,true,o[n].timer,o[n].rolling,o[n].scroll)}}function y(t){var n=e(".heum-item-group").index(t.find(".heum-item-group"));s[n]=true;h(t,true,o[n].timer,o[n].rolling,o[n].scroll)}function b(t){var n=e(".heum-item-group").index(t.find(".heum-item-group"));s[n]=false;h(t,false,o[n].timer,o[n].rolling,o[n].scroll)}var i=new Array,s=new Array,o=new Array,u="heumRolling",a={scroll:"horizontal",rolling:"next",autoscroll:true,button:false,timer:5};f.prototype={init:function(){var t=t;var n=e(this.element);l(n,this.options);if(this.options.scroll=="vertical"){var i=0;var s=0;n.find(".item").each(function(){s=Math.max(s,e(this).outerWidth(true));var t=(parseInt(e(this).css("margin-top").replace("px"))+parseInt(e(this).css("margin-bottom").replace("px")))/2;i+=e(this).innerHeight()+t});var o=(parseInt(n.find(".item:last").css("margin-top").replace("px"))+parseInt(n.find(".item:last").css("margin-bottom").replace("px")))/2;var u=this.options.groupsize!=r?this.options.groupsize:i-(n.find(".item:last").innerHeight()+o);n.find(".heum-item-group").css({height:i+"px"}).wrap("<div class='heum-rolling-group' style='width:100%;max-width:"+s+"px;height :"+u+(/%/.test(u)?"":"px")+";'/>")}else{n.find(".item").addClass("scroll-horizontal");var i=0;var a=0;n.find(".item").each(function(){a=Math.max(a,e(this).outerHeight(true));i+=e(this).outerWidth(true)});var u=this.options.groupsize!=r?this.options.groupsize:i-n.find(".item:last").outerWidth(true);n.find(".heum-item-group").css({width:i+"px"}).wrap("<div class='heum-rolling-group' style='width:100%;max-width:"+u+(/%/.test(u)?"":"px")+";height:"+a+"px;'/>")}if(this.options.button){var f=e("<button/>",{type:"button",text:"start",data:{"heum-rolling":"start"},css:{display:!this.options.autoscroll?"":"none"}}).on("click touchend",function(t){c(t,e(this));e(this).hide();p.show();n.heumRolling().start()});f.appendTo(n);var p=e("<button/>",{type:"button",text:"pause",data:{"heum-rolling":"pause"},css:{display:this.options.autoscroll?"":"none"}}).on("click touchend",function(t){c(t,e(this));e(this).hide();f.show();n.heumRolling().pause()});p.appendTo(n);e("<button/>",{type:"button",text:"prev",data:{"heum-rolling":"prev"}}).on("click touchend",function(t){c(t,e(this));n.heumRolling().prev()}).appendTo(n);e("<button/>",{type:"button",text:"next",data:{"heum-rolling":"next"}}).on("click touchend",function(t){c(t,e(this));n.heumRolling().next()}).appendTo(n)}else{n.find("*[data-heum-rolling=start]").on("click touchend",function(t){c(t,e(this));n.heumRolling().start()});n.find("*[data-heum-rolling=pause]").on("click touchend",function(t){c(t,e(this));n.heumRolling().pause()});n.find("*[data-heum-rolling=next]").on("click touchend",function(t){c(t,e(this));n.heumRolling().next()});n.find("*[data-heum-rolling=prev]").on("click touchend",function(t){c(t,e(this));n.heumRolling().prev()})}var d=e(".heum-item-group").index(e(this).find(".heum-item-group"));h(n,this.options.autoscroll,this.options.timer,this.options.rolling,this.options.scroll)}};e.fn[u]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+u)){e.data(this,"plugin_"+u,new f(this,t))}else{e.fn.extend({next:function(){m(this)},prev:function(){g(this)},start:function(){y(this)},pause:function(){b(this)}})}})}})(jQuery,window,document)